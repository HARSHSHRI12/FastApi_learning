from fastapi import FastAPI, Path, HTTPException
import json
app= FastAPI()

#healper function for load data from patients.json file

def load_data():
    with open('patients.json','r') as f:
        data=json.load(f)
        return data

  #get api metod for data read     
@app.get("/patients")
def dataprint():
    return {"the existing patients are:":load_data()}

@app.get("/")
def hello():
    return {"message":"Hello harsh welcome to patient management system!"}

@app.get("/contact")
def contact():
    return {"Here is the contact info:":{"Mob no: 8784748474"},"email id":{"gmail: harsh@gmail.com"},"linkedin id": {"linkedin : https://www.linkedin.com/in/harsh-shrivastva-0"}}

@app.get("/about")
def about():
    return {"about our website":" here you are able to add patients remove patients update patients etc.."}

@app.get("/patients/{patient_id}")
def view_patient(patient_id:str=Path(...,description="the patient data comes here from Database",
example="P001")):
    data=load_data()

    if patient_id in data:
        return data[patient_id]
    raise HTTPException(status_code=404, detail="Patient not found")

